<!-- HERO SECTION -->
<div
  class="relative text-white px-4 py-16 md:py-24 rounded-b-2xl mb-10 bg-cover bg-center"
  style="background-image: linear-gradient(to bottom, rgba(0,0,0,0.85), rgba(0,0,0,0.6)), url('https://image.tmdb.org/t/p/original/wwemzKWzjKYJFfCeiB57q3r4Bcm.png')"
>
  <div class="max-w-6xl mx-auto text-center">
    <h1 class="text-3xl md:text-5xl font-extrabold mb-4">
      Bienvenue sur <span class="text-red-600">CinéTrack</span>
    </h1>
    <p class="text-lg md:text-xl text-gray-300 mb-8">
      Découvrez des millions de films, séries et artistes.
    </p>

    <!-- SEARCH BOX -->
    <div class="flex flex-col sm:flex-row gap-3 max-w-3xl mx-auto mb-8">
      <input
        type="text"
        [(ngModel)]="searchQuery"
        (keyup.enter)="onSearch()"
        placeholder="Rechercher un film, une série..."
        class="flex-1 px-5 py-3 rounded-full text-black outline-none focus:ring-2 focus:ring-red-600"
      />

      <button
        (click)="onSearch()"
        class="px-6 py-3 rounded-full bg-red-600 hover:bg-red-700 transition font-bold"
      >
        Rechercher
      </button>
    </div>

    <!-- FILTERS -->
    <div
      class="flex flex-col md:flex-row justify-center items-center gap-6 bg-black/40 p-4 rounded-xl backdrop-blur-sm"
    >
      <!-- GENRE -->
      <div class="flex flex-col text-left w-full md:w-auto">
        <label class="text-xs text-gray-400 font-semibold mb-1">Genre</label>
        <select
          [(ngModel)]="selectedGenre"
          (change)="applyFilters()"
          class="px-3 py-2 bg-black/70 border border-gray-600 rounded text-white focus:ring-2 focus:ring-red-600"
        >
          <option value="">Tous les genres</option>
          <option *ngFor="let genre of genres" [value]="genre.id">
            {{ genre.name }}
          </option>
        </select>
      </div>

      <!-- YEAR -->
      <div class="flex flex-col text-left w-full md:w-auto">
        <label class="text-xs text-gray-400 font-semibold mb-1">Année</label>
        <select
          [(ngModel)]="selectedYear"
          (change)="applyFilters()"
          class="px-3 py-2 bg-black/70 border border-gray-600 rounded text-white focus:ring-2 focus:ring-red-600"
        >
          <option value="">Toutes les années</option>
          <option *ngFor="let year of years" [value]="year">
            {{ year }}
          </option>
        </select>
      </div>

      <!-- RATING -->
      <div class="flex flex-col text-left w-full md:w-auto">
        <label class="text-xs text-gray-400 font-semibold mb-1">
          Note minimum : {{ minRating }}
        </label>
        <input
          type="range"
          min="0"
          max="10"
          step="1"
          [(ngModel)]="minRating"
          (change)="applyFilters()"
          class="accent-red-600 cursor-pointer"
        />
      </div>
    </div>
  </div>
</div>

<!-- MOVIE GRID -->
<div class="max-w-7xl mx-auto px-4">
  <div
    class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6"
  >
    <div
      *ngFor="let movie of popularMovies"
      class="group relative cursor-pointer transform transition duration-300 hover:scale-105"
      [routerLink]="['/movie', movie.id]"
    >
      <img
        [src]="'https://image.tmdb.org/t/p/w500' + movie.poster_path"
        alt="{{ movie.title }}"
        class="rounded-lg shadow-lg w-full h-full object-cover"
      />

      <!-- OVERLAY INFO -->
      <div
        class="absolute inset-x-0 bottom-0 bg-black/80 text-white p-3 opacity-0 group-hover:opacity-100 transition rounded-b-lg"
      >
        <h3 class="text-sm font-semibold truncate">
          {{ movie.title }}
        </h3>
        <p class="text-xs text-gray-300">
          {{ movie.release_date | date: 'yyyy' }}
        </p>
      </div>
    </div>
  </div>
</div>
